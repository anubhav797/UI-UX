<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dream Travel Agency</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; }
    nav { background: #333; padding: 10px; text-align: center; position: sticky; top: 0; }
    nav a { color: white; margin: 10px; text-decoration: none; }
    nav a.active { border-bottom: 2px solid yellow; }
    section { padding: 20px; }

    /* Banner */
    .banner { height: 250px; background: url('banner.jpg') center/cover no-repeat; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; }
    .banner h1 { margin: 0; font-size: 2.5em; }

    /* Table */
    table { width: 100%; border-collapse: collapse; margin-top: 15px; background: bisque; }
    th, td { border: 1px solid black; padding: 10px; text-align: center; }

    /* Booking */
    form { max-width: 500px; margin: auto; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); border-radius: 8px; }
    form input, form select, form textarea, form button { width: 100%; margin: 10px 0; padding: 10px; }
    form button:hover { background: teal; color: white; cursor: pointer; }
    .error { color: red; font-size: 0.9em; }
    #totalPrice { font-weight: bold; }

    /* Gallery */
    .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
    .gallery img { width: 100%; border-radius: 8px; cursor: pointer; }
    .gallery figcaption { text-align: center; font-style: italic; }
    .modal { display: none; position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.8); justify-content: center; align-items: center; }
    .modal img { max-width: 80%; max-height: 80%; border: 3px solid white; }
    .modal.active { display: flex; }

    .toggleBtn { margin-bottom: 15px; padding: 8px 12px; cursor: pointer; }
    .listView .gallery { display: block; }
    .listView .gallery figure { margin-bottom: 15px; }
  </style>
</head>
<body>

  <!-- Banner + Nav -->
  <div class="banner">
    <h1>Welcome to Dream Travel Agency</h1>
    <nav>
      <a href="#packages">Packages</a>
      <a href="#booking">Booking</a>
      <a href="#gallery">Gallery</a>
    </nav>
  </div>

  <!-- Intro -->
  <section id="intro">
    <h2>Your Journey begins here</h2>
    <p>Explore the world with our exclusive and affordable packages designed for every destination.</p>
  </section>

  <!-- Packages -->
  <section id="packages">
    <h2>Available Packages</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th><th>Destination</th><th>Duration</th><th>Base Price</th><th>Season</th><th>Final Price</th>
        </tr>
      </thead>
      <tbody id="packageTable"></tbody>
    </table>
  </section>

  <!-- Booking -->
  <section id="booking">
    <h2>Booking Price Estimator</h2>
    <form id="bookingForm">
      <label>Package:
        <select id="packageSelect" required></select>
      </label>
      <label>Check-in: <input type="date" id="checkIn" required></label>
      <label>Check-out: <input type="date" id="checkOut" required></label>
      <label>Guests: <input type="number" id="guests" min="1" value="1" required></label>
      <label>Promo Code: <input type="text" id="promo"></label>
      <p>Total Price: <span id="totalPrice">$0</span></p>
      <p class="error" id="formError"></p>
      <button type="submit" disabled>Book Now</button>
    </form>
  </section>

  <!-- Gallery -->
  <section id="gallery">
    <h2>Gallery</h2>
    <button class="toggleBtn" id="layoutToggle">Toggle Layout</button>
    <div class="gallery">
      <figure>
        <img src="thumb1.jpg" data-large="large1.jpg" alt="Beach" title="Sunny Beach">
        <figcaption>Relax in Maldives</figcaption>
      </figure>
      <figure>
        <img src="thumb2.jpg" data-large="large2.jpg" alt="Mountains" title="Snowy Mountains">
        <figcaption>Trek in Nepal</figcaption>
      </figure>
      <figure>
        <img src="thumb3.jpg" data-large="large3.jpg" alt="City" title="City Lights">
        <figcaption>Explore Europe</figcaption>
      </figure>
    </div>
  </section>

  <!-- Modal -->
  <div class="modal" id="modal"><img id="modalImg" src="" alt=""></div>

  <footer style="text-align:center; padding:15px;">Â© 2025 Dream Travel Agency</footer>

<script>
/* -------------------------
   Packages Data + Rendering
-------------------------- */
const packages = [
  { id: 1, destination: "Maldives", durationDays: 5, basePrice: 1200, season: "summer" },
  { id: 2, destination: "Nepal", durationDays: 7, basePrice: 900, season: "winter" },
  { id: 3, destination: "Europe", durationDays: 10, basePrice: 2500, season: "spring" }
];

function computeFinalPrice(pkg) {
  let multiplier = 1;
  switch(pkg.season) {
    case "summer": multiplier = 1.2; break;
    case "winter": multiplier = 1.1; break;
    case "spring": multiplier = 0.9; break;
  }
  if(pkg.durationDays > 6) multiplier += 0.1;
  return pkg.basePrice * multiplier;
}

const packageTable = document.getElementById("packageTable");
const packageSelect = document.getElementById("packageSelect");

packages.forEach(pkg => {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${pkg.id}</td>
    <td>${pkg.destination}</td>
    <td>${pkg.durationDays} days</td>
    <td>$${pkg.basePrice}</td>
    <td>${pkg.season}</td>
    <td>$${computeFinalPrice(pkg).toFixed(2)}</td>
  `;
  packageTable.appendChild(tr);

  const opt = document.createElement("option");
  opt.value = pkg.id;
  opt.textContent = `${pkg.destination} (${pkg.durationDays} days)`;
  packageSelect.appendChild(opt);
});

/* -------------------------
   Booking Logic
-------------------------- */
const checkIn = document.getElementById("checkIn");
const checkOut = document.getElementById("checkOut");
const guests = document.getElementById("guests");
const promo = document.getElementById("promo");
const totalPriceEl = document.getElementById("totalPrice");
const formError = document.getElementById("formError");
const bookingForm = document.getElementById("bookingForm");
const bookBtn = bookingForm.querySelector("button");

function calculateTotal() {
  formError.textContent = "";
  const pkg = packages.find(p => p.id == packageSelect.value);
  if(!pkg || !checkIn.value || !checkOut.value) return 0;

  const inDate = new Date(checkIn.value);
  const outDate = new Date(checkOut.value);
  if(outDate <= inDate) {
    formError.textContent = "Check-out must be after check-in.";
    bookBtn.disabled = true;
    return 0;
  }

  const nights = (outDate - inDate)/(1000*60*60*24);
  let price = computeFinalPrice(pkg) * nights;

  if(parseInt(guests.value) > 2) price *= 1.2;

  switch(promo.value.toUpperCase()) {
    case "EARLYBIRD": price *= 0.9; break;
    case "VIP": price *= 0.8; break;
  }

  bookBtn.disabled = false;
  return price;
}

function updateTotal() {
  totalPriceEl.textContent = "$" + calculateTotal().toFixed(2);
}

[packageSelect, checkIn, checkOut, guests, promo].forEach(el => el.addEventListener("input", updateTotal));

bookingForm.addEventListener("submit", e => {
  e.preventDefault();
  if(!formError.textContent) alert("Booking confirmed! " + totalPriceEl.textContent);
});

/* -------------------------
   Gallery Modal + Layout Toggle
-------------------------- */
const modal = document.getElementById("modal");
const modalImg = document.getElementById("modalImg");

document.querySelectorAll(".gallery img").forEach(img => {
  img.addEventListener("click", () => {
    modal.classList.add("active");
    modalImg.src = img.dataset.large;
    modalImg.alt = img.alt;
    modalImg.title = img.title;
  });
});
modal.addEventListener("click", () => modal.classList.remove("active"));

document.getElementById("layoutToggle").addEventListener("click", () => {
  document.body.classList.toggle("listView");
});

/* -------------------------
   Nav Highlight + Scroll
-------------------------- */
const navLinks = document.querySelectorAll("nav a");
window.addEventListener("scroll", () => {
  let fromTop = window.scrollY + 60;
  navLinks.forEach(link => {
    const section = document.querySelector(link.getAttribute("href"));
    if(section.offsetTop <= fromTop && section.offsetTop + section.offsetHeight > fromTop) {
      link.classList.add("active");
    } else {
      link.classList.remove("active");
    }
  });
});
</script>
</body>
</html>
